(()=>{"use strict";var e={20:(e,t,a)=>{var o=a(609),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,a){var o,n={},l=null,m=null;for(o in void 0!==a&&(l=""+a),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(m=t.ref),t)s.call(t,o)&&!c.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===n[o]&&(n[o]=t[o]);return{$$typeof:r,type:e,key:l,ref:m,props:n,_owner:i.current}}t.Fragment=n,t.jsx=l,t.jsxs=l},609:e=>{e.exports=window.React},848:(e,t,a)=>{e.exports=a(20)}},t={};function a(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const o=window.wp.i18n,r=window.wp.element,n=window.wp.components;var s=a(848);const i=()=>{const e=(0,o.__)("Easy Paidy payment setup","woocommerce-for-japan");return(0,s.jsx)(n.__experimentalHeading,{level:2,children:e})},c=({onClick:e})=>(0,s.jsx)(n.Button,{className:"paidy-setting-step1 paidy-button",onClick:()=>{window.location.href="/wp-admin/admin.php?page=wc-admin&path=%2Fpaidy-on-boarding"},children:(0,o.__)("Start easy Paidy payment setup","woocommerce-for-japan")}),l=()=>(0,s.jsxs)("div",{className:"paidy-completed-message",children:[(0,s.jsx)(n.__experimentalHeading,{level:3,children:(0,o.__)("Status: Under review","woocommerce-for-japan")}),(0,s.jsx)("p",{children:(0,o.__)("Thank you for your application. We will notify you of the results via email and dashboard.","woocommerce-for-japan")}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,o.__)("The review process may take up to 5 business days.","woocommerce-for-japan")}),(0,s.jsx)("li",{children:(0,o.__)("Inquiries regarding screening: sales@paidy.com","woocommerce-for-japan")})]})]}),m=window.wp.apiFetch;var d=a.n(m);const p=window.wp.notices,u=window.wp.data,y=()=>(0,s.jsxs)("div",{className:"paidy-rejected-message",children:[(0,s.jsx)(n.__experimentalHeading,{level:3,children:(0,o.__)("Status: The review was rejected","woocommerce-for-japan")}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,o.__)("After careful and repeated review, we regret to inform you that we have decided to postpone the transaction at this time.","woocommerce-for-japan")}),(0,s.jsx)("li",{children:(0,o.__)("We sincerely apologize for not being able to meet your expectations.","woocommerce-for-japan")}),(0,s.jsx)("li",{children:(0,o.__)("Please understand that we cannot provide details about the content of the review.","woocommerce-for-japan")})]})]}),h=({onClick:e})=>{const[t,a]=(0,r.useState)();return(0,r.useEffect)(()=>{d()({path:"/wc/v3/payment_gateways/paidy"}).then(e=>{const t=e.settings?.environment?.value||e.settings?.environment||"";a(t)}).catch(e=>d()({path:"/wp/v2/settings"})).then(e=>{if(e){const o=e.woocommerce_paidy_settings||{};t||a(o.environment||"")}}).catch(e=>{console.error("Settings API Error:",e)})},[]),"sandbox"===t?(0,s.jsx)("div",{className:"paidy-enabled-test-message",children:(0,o.__)("Now test mode","woocommerce-for-japan")}):(0,s.jsx)(n.Button,{className:"paidy-button test-button",onClick:e,children:(0,o.__)("Enable test mode","woocommerce-for-japan")})},v=()=>{const[e,t]=(0,r.useState)(!1),[a,i]=(0,r.useState)(),{createErrorNotice:c,createSuccessNotice:l}=(0,u.useDispatch)(p.store),m=window.paidyForWcSettings?.restUrl||"";(0,r.useEffect)(()=>{d()({path:"/wc/v3/payment_gateways/paidy"}).then(e=>{const t=e.settings?.environment?.value||e.settings?.environment||"";if(i(t),"sandbox"===t||"live"===t){const e=document.getElementById("paidy-payment-settings");e?e.style.display="block":console.warn("Element #paidy-payment-settings not found")}}).catch(e=>(console.error("Failed to fetch environment:",e),d()({path:"/wp/v2/settings"}))).then(e=>{if(e&&!a){const t=(e.woocommerce_paidy_settings||{}).environment||"";if(i(t),"sandbox"===t||"live"===t){const e=document.getElementById("paidy-payment-settings");e&&(e.style.display="block")}}}).catch(e=>{console.error("Failed to fetch settings:",e)})},[]);const y=()=>{d()({path:"/wc/v3/payment_gateways/paidy",method:"PUT",data:{enabled:!0,settings:{environment:"live"}}}).then(e=>{window.location.href="/wp-admin/admin.php?page=wc-settings&tab=checkout&section=paidy"}).catch(e=>{t(!1),c(e.message||(0,o.__)("Error enabling Paidy","woocommerce-for-japan"),{type:"snackbar",isDismissible:!0,autoDismiss:!1})})};return"sandbox"===a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_,{}),(0,s.jsx)("div",{className:"paidy-enabled-button",children:(0,s.jsx)(n.Button,{className:"paidy-button production-button",onClick:y,disabled:e,children:(0,o.__)("Enable production mode","woocommerce-for-japan")})})]}):"live"===a?(0,s.jsx)(f,{}):(0,s.jsxs)("div",{className:"paidy-approved-message",children:[(0,s.jsx)(n.__experimentalHeading,{level:3,children:(0,o.__)("Status: The review approved","woocommerce-for-japan")}),(0,s.jsxs)("p",{children:[(0,o.__)("The review has been completed and the merchant agreement has been concluded.","woocommerce-for-japan"),(0,s.jsx)("br",{}),(0,o.__)("For terms of use, please check the terms and conditions notification email sent by Paidy Inc.","woocommerce-for-japan")]}),(0,s.jsxs)("ul",{className:"paidy-approved-list",children:[(0,s.jsx)("li",{children:(0,o.__)("We recommend setting the Webhook URL in the Paidy merchant management screen before publishing in production mode. Set the Webhook URL to the following value.","woocommerce-for-japan")}),(0,s.jsx)("li",{children:(0,o.__)("[Common for test and production]","woocommerce-for-japan")}),(0,s.jsxs)("li",{children:[m,"/wp-json/paidy/v1/order/"]}),(0,s.jsx)("li",{children:(0,o.__)("Please refer to the manual for information on the Paidy merchant management screen.","woocommerce-for-japan")})]}),(0,s.jsxs)("div",{className:"paidy-enabled-button",children:[(0,s.jsx)("p",{children:(0,o.__)("Please click one of the buttons below.","woocommerce-for-japan")}),(0,s.jsx)(h,{onClick:()=>{d()({path:"/wc/v3/payment_gateways/paidy",method:"PUT",data:{enabled:!0,settings:{environment:"sandbox"}}}).then(e=>{l((0,o.__)("Settings saved.","woocommerce-for-japan")),window.location.href="/wp-admin/admin.php?page=wc-settings&tab=checkout&section=paidy"}).catch(e=>{t(!1),c(e.message||(0,o.__)("Error enabling Paidy","woocommerce-for-japan"),{type:"snackbar",isDismissible:!0,autoDismiss:!1})})}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(n.Button,{className:"paidy-button production-button",onClick:y,disabled:e,children:(0,o.__)("Enable production mode","woocommerce-for-japan")})]})]})},_=()=>(0,s.jsxs)("div",{className:"paidy-setting-sandbox-message",children:[(0,s.jsx)(n.__experimentalHeading,{level:3,children:(0,o.__)("Paidy test payments enabled","woocommerce-for-japan")}),(0,s.jsxs)("p",{children:[(0,o.__)("You can now test Paidy payments.","woocommerce-for-japan"),(0,s.jsx)("br",{}),(0,o.__)("Please check the test payment flow.","woocommerce-for-japan"),(0,s.jsx)("br",{}),(0,s.jsx)("a",{href:"https://paidy.com/docs/jp/testing.html",target:"_blank",children:(0,o.__)("Paidy test payment flow","woocommerce-for-japan")}),(0,s.jsx)("br",{}),(0,o.__)("After confirming the test payment, please switch to production mode.","woocommerce-for-japan")]})]}),f=()=>(0,s.jsx)("div",{className:"paidy-setting-completed-message",children:(0,s.jsx)(n.__experimentalHeading,{level:3,children:(0,o.__)("Paidy Payments is now live","woocommerce-for-japan")})}),w=()=>{const{currentStep:e}=(()=>{const[e,t]=(0,r.useState)(0),[a,n]=(0,r.useState)(),[s,i]=(0,r.useState)(),[c,l]=(0,r.useState)(),[m,y]=(0,r.useState)(),[h,v]=(0,r.useState)(),[_,f]=(0,r.useState)(),[w,j]=(0,r.useState)(),[g,b]=(0,r.useState)(),[S,x]=(0,r.useState)(),[C,k]=(0,r.useState)(),[N,P]=(0,r.useState)(),[R,E]=(0,r.useState)(),[D,T]=(0,r.useState)(),[F,L]=(0,r.useState)(""),[O,A]=(0,r.useState)(),[U,W]=(0,r.useState)(),[B,I]=(0,r.useState)(),[K,H]=(0,r.useState)(),[G,z]=(0,r.useState)(""),[V,q]=(0,r.useState)("yes"),[Y,$]=(0,r.useState)("yes"),{createErrorNotice:M,createSuccessNotice:J}=(0,u.useDispatch)(p.store);return(0,r.useEffect)(()=>{d()({path:"/wp/v2/settings"}).then(e=>{const a=e.woocommerce_paidy_on_boarding_settings;t(Number(a.currentStep||0)),n(a.storeName||""),i(a.siteName||""),l(a.storeUrl||""),y(a.registEmail||""),v(a.contactPhone||""),f(a.representativeLastName||""),j(a.representativeFirstName||""),b(a.representativeLastNameKana||""),x(a.representativeFirstNameKana||""),k(a.representativeDateOfBirth),P(a.annualGrossValue),E(a.averagePurchaseAmount),T(a.securitySurvey01RadioControl||""),L(a.securitySurvey01TextControl||""),A(a.securitySurvey11CheckControl),W(a.securitySurvey12CheckControl),I(a.securitySurvey13CheckControl),H(a.securitySurvey14CheckControl),z(a.securitySurvey10TextAreaControl||""),q(a.securitySurvey08RadioControl||"yes"),$(a.securitySurvey09RadioControl||"yes")})},[]),{currentStep:e,setCurrentStep:t,storeName:a,setStoreName:n,siteName:s,setSiteName:i,storeUrl:c,setStoreUrl:l,registEmail:m,setRegistEmail:y,contactPhone:h,setContactPhone:v,representativeLastName:_,setRepesentativeLastName:f,representativeFirstName:w,setRepresentativeFirstName:j,representativeLastNameKana:g,setRepresentativeLastNameKana:b,representativeFirstNameKana:S,setRepresentativeFirstNameKana:x,representativeDateOfBirth:C,setRepresentativeDateOfBirth:k,annualGrossValue:N,setAnnualGrossValue:P,averagePurchaseAmount:R,setAveragePurchaseAmount:E,securitySurvey01RadioControl:D,setSecuritySurvey01RadioControl:T,securitySurvey01TextControl:F,setSecuritySurvey01TextControl:L,securitySurvey11CheckControl:O,setSecuritySurvey11CheckControl:A,securitySurvey12CheckControl:U,setSecuritySurvey12CheckControl:W,securitySurvey13CheckControl:B,setSecuritySurvey13CheckControl:I,securitySurvey14CheckControl:K,setSecuritySurvey14CheckControl:H,securitySurvey10TextAreaControl:G,setSecuritySurvey10TextAreaControl:z,securitySurvey08RadioControl:V,setSecuritySurvey08RadioControl:q,securitySurvey09RadioControl:Y,setSecuritySurvey09RadioControl:$,saveSettings:()=>{let r=!1;[{value:a,label:(0,o.__)("Trade name / Store name","woocommerce-for-japan")},{value:s,label:(0,o.__)("Your EC site name","woocommerce-for-japan")},{value:c,label:(0,o.__)("Store URL","woocommerce-for-japan")},{value:m,label:(0,o.__)("Email address for registering Paidy","woocommerce-for-japan")},{value:h,label:(0,o.__)("Contact phone number","woocommerce-for-japan")},{value:_,label:(0,o.__)("Representative (last name)","woocommerce-for-japan")},{value:w,label:(0,o.__)("Representative (first name)","woocommerce-for-japan")},{value:g,label:(0,o.__)("Representative (last name kana)","woocommerce-for-japan")},{value:S,label:(0,o.__)("Representative (first name kana)","woocommerce-for-japan")},{value:C,label:(0,o.__)("Representative's date of birth (Gregorian calendar)","woocommerce-for-japan")}].forEach(e=>{e.value||(M(/* translators: %s: field label name */ /* translators: %s: field label name */
(0,o.sprintf)((0,o.__)("%s is a required field. Please enter it.","woocommerce-for-japan"),e.label),{type:"snackbar",isDismissible:!0,autoDismiss:!1}),r=!0)});let n=!1;const i=/^[ァ-ヶー]+$/;[{value:g,label:(0,o.__)("Representative (last name kana)","woocommerce-for-japan")},{value:S,label:(0,o.__)("Representative (first name kana)","woocommerce-for-japan")}].forEach(e=>{i.test(e.value)||(M(/* translators: %s: field label name */ /* translators: %s: field label name */
(0,o.sprintf)((0,o.__)("%s must be in full-width katakana. Please confirm.","woocommerce-for-japan"),e.label),{type:"snackbar",isDismissible:!0,autoDismiss:!1}),n=!0)});let l=!1;if("no"!==D||F?.trim()||(M((0,o.__)('When selecting "No" for the security survey question, please provide additional details in the text field.',"woocommerce-for-japan"),{type:"snackbar",isDismissible:!0,autoDismiss:!1}),l=!0),!0===O||!0===U||!0===B||!0===K||G?.trim()||(M((0,o.__)("Since none of the security measures are implemented, please provide details about your security approach in the additional information field.","woocommerce-for-japan"),{type:"snackbar",isDismissible:!0,autoDismiss:!1}),l=!0),r)return void M((0,o.__)("Please fill in all the fields.","woocommerce-for-japan"),{type:"snackbar",isDismissible:!0,autoDismiss:!1});if(n||l)return;const p=e+1;t(p),d()({path:"/wp/v2/settings",method:"POST",data:{woocommerce_paidy_on_boarding_settings:{currentStep:p,storeName:a,siteName:s,storeUrl:c,registEmail:m,contactPhone:h,representativeLastName:_,representativeFirstName:w,representativeLastNameKana:g,representativeFirstNameKana:S,representativeDateOfBirth:C,annualGrossValue:N,averagePurchaseAmount:R,securitySurvey01RadioControl:D,securitySurvey01TextControl:F,securitySurvey11CheckControl:O,securitySurvey12CheckControl:U,securitySurvey13CheckControl:B,securitySurvey14CheckControl:K,securitySurvey10TextAreaControl:G,securitySurvey08RadioControl:V,securitySurvey09RadioControl:Y}}}).then(()=>{J((0,o.__)("Settings saved.","woocommerce-for-japan"))})}}})(),t=window.paidyForWcSettings?.paidyAdUrl||"https://paidy.com/campaign/merchant/202404_WW",a=window.paidyForWcSettings?.nonWizardUrl||"/wp-admin/admin.php?page=wc-settings&tab=checkout&section=paidy&wizard=false";return 2===e?(0,s.jsxs)("div",{children:[(0,s.jsx)(i,{}),(0,s.jsx)(l,{})]}):3===e?(0,s.jsxs)("div",{children:[(0,s.jsx)(i,{}),(0,s.jsx)(v,{})]}):99===e?(0,s.jsxs)("div",{children:[(0,s.jsx)(i,{}),(0,s.jsx)(y,{})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{}),(0,s.jsxs)("div",{className:"paidy-on-boarding",children:[(0,s.jsx)("div",{className:"paidy-on-boarding__img",children:(0,s.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:(0,s.jsx)("img",{src:"/wp-content/plugins/woocommerce-for-japan/assets/images/paidy_logo_w800.png",alt:"Paidy"})})}),(0,s.jsxs)("div",{className:"paidy-on-boarding__content",children:[(0,s.jsx)("p",{children:(0,o.__)("Applying for and setting up Paidy is easy.","woocommerce-for-japan")}),(0,s.jsx)(c,{})]})]}),(0,s.jsxs)("div",{className:"paidy-on-boarding__description",children:[(0,s.jsxs)("p",{children:[(0,o.__)("There is no setup cost, payment fees start from 3.5%, and if you apply via this service, you will receive a one-month trial with no payment fees!","woocommerce-for-japan"),(0,s.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:(0,o.__)("Learn more about Paidy","woocommerce-for-japan")})]}),(0,s.jsx)("p",{children:(0,s.jsx)("a",{href:a,rel:"noreferrer",children:(0,o.__)("Enter the information manually without using the wizard.","woocommerce-for-japan")})})]})]})};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("paidy-admin-settings");e&&(0,r.createRoot)(e).render((0,s.jsx)(w,{}))})})();