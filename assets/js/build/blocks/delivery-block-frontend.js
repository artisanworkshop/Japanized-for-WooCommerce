(()=>{"use strict";var e={20:(e,t,o)=>{var n=o(609),r=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(e,t,o){var n,a={},c=null,d=null;for(n in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!s.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:l.current}}t.jsx=a,t.jsxs=a},609:e=>{e.exports=window.React},848:(e,t,o)=>{e.exports=o(20)}},t={};const o=window.wp.plugins,n=window.wc.blocksCheckout,r=window.wp.i18n,i=window.wp.components,l=window.wp.element,s=window.wp.data,a=window.wc.wcBlocksData;var c=function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}(848);const d=()=>{const e=window.jp4wcDeliveryData||{},{deliveryDates:t=[],timeZones:o=[],isDateEnabled:n=!1,isTimeEnabled:d=!1,isDateRequired:p=!1,isTimeRequired:u=!1}=e;console.log("[JP4WC Delivery] Script data:",{isDateEnabled:n,isTimeEnabled:d,deliveryDatesCount:t.length,timeZonesCount:o.length});const[w,_]=(0,l.useState)((()=>{if(p&&t.length>0){const e=t.find(e=>"0"!==e.value);return e?e.value:t[0].value}return"0"})()),[v,m]=(0,l.useState)((()=>{if(u&&o.length>0){const e=o.find(e=>"0"!==e.value);return e?e.value:o[0].value}return"0"})()),{setExtensionData:f}=(0,s.useDispatch)(a.CHECKOUT_STORE_KEY);return(0,s.useSelect)(e=>{const t=e(a.CHECKOUT_STORE_KEY),o=t.getCartData?.(),n=o?.items||[];return n.length>0&&n.every(e=>!0===e.is_virtual)},[])?null:n||d?((0,l.useEffect)(()=>{if(f){const e={wc4jp_delivery_date:w,wc4jp_delivery_time_zone:v};console.log("[JP4WC Delivery] Setting extension data:",e),f("jp4wc-delivery",e)}else console.error("[JP4WC Delivery] setExtensionData not available")},[w,v,f]),(0,c.jsxs)("div",{className:"wc-block-components-checkout-step__container jp4wc-delivery-fields",children:[(0,c.jsx)("h3",{className:"wc-block-components-checkout-step__title wc-block-components-title",children:(0,r.__)("Delivery request date and time","woocommerce-for-japan")}),(0,c.jsxs)("div",{className:"wc-block-components-checkout-step__content",children:[n&&(0,c.jsx)("div",{className:"wc-block-components-text-input delivery-date",children:(0,c.jsx)(i.SelectControl,{label:(0,r.__)("Preferred delivery date","woocommerce-for-japan"),value:w,onChange:e=>_(e),options:t,required:p,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}),d&&(0,c.jsx)("div",{className:"wc-block-components-text-input delivery-time",children:(0,c.jsx)(i.SelectControl,{label:(0,r.__)("Delivery Time Zone","woocommerce-for-japan"),value:v,onChange:e=>m(e),options:o,required:u,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})})]})]})):null};(0,o.registerPlugin)("jp4wc-delivery-block",{render:()=>(0,c.jsx)(n.ExperimentalOrderShippingPackages,{children:(0,c.jsx)(d,{})}),scope:"woocommerce-checkout"})})();